<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Volumetric Display Simulator - 40x40x20</title>
    <link rel="stylesheet" href="src/css/styles.css">
</head>
<body>
    <div id="container">
        <div id="canvas-container">
            <div id="top-panel">
                <div id="display-info-panel">
                    <div class="display-info-header">
                        <div class="display-info-stats">
                            <span id="grid-resolution">40×20×40</span>
                            <span id="camera-view">(0.0, 0.0)</span>
                            <span id="active-leds">0</span>
                            <span id="fps">0</span>
                        </div>
                        <div class="display-info-title">
                            <h1>Volumetric Display</h1>
                        </div>
                        <div class="display-info-actions">
                            <button class="action-btn-inline" id="toggle-rotate">Rot</button>
                            <button class="action-btn-inline" id="toggle-axes">Axes</button>
                            <button class="action-btn-inline" id="reset-view">Reset</button>
                        </div>
                    </div>
                </div>
            </div>
            <canvas id="canvas"></canvas>
            <div id="bottom-panels">
                <div id="debug-panel">
                    <div id="debug-header" class="collapsed">
                        <span>Debug Console</span>
                        <button id="debug-toggle">▶</button>
                    </div>
                    <div id="debug-content" class="collapsed">
                        <div id="debug-stats">
                            <div>Scene: <span id="debug-scene">-</span></div>
                            <div>Active LEDs: <span id="debug-active-leds">-</span></div>
                            <div>Global FX: <span id="debug-fx">-</span></div>
                            <div>Frame Time: <span id="debug-frame-time">-</span></div>
                        </div>
                        <div id="debug-logs"></div>
                        <button id="debug-clear">Clear</button>
                    </div>
                </div>

                <div id="display-params-panel">
                    <div class="panel-header-collapsible collapsed" id="display-params-header">
                        <span>Display Parameters</span>
                        <button class="collapse-toggle">▼</button>
                    </div>
                    <div class="panel-content collapsed" id="display-params-content">
                        <div class="params-grid">
                            <div class="param-item">
                                <label>LED Size <span class="value-display" id="led-size-value">1.0</span></label>
                                <input type="range" id="led-size" min="1" max="10" step="0.5" value="1.0">
                            </div>
                            <div class="param-item">
                                <label>Brightness <span class="value-display" id="brightness-value">0.8</span></label>
                                <input type="range" id="brightness" min="0.2" max="1" step="0.05" value="0.8">
                            </div>
                            <div class="param-item">
                                <label>Grid Opacity <span class="value-display" id="grid-opacity-value">0.2</span></label>
                                <input type="range" id="grid-opacity" min="0" max="0.5" step="0.05" value="0.2">
                            </div>
                        </div>
                        <div class="rotation-controls-compact">
                            <label>Rotation Rate</label>
                            <div class="rotation-inputs-inline">
                                <div class="rotation-input-inline">
                                    <label>X</label>
                                    <input type="number" id="rot-x" min="-20" max="20" value="0" class="rot-input">
                                </div>
                                <div class="rotation-input-inline">
                                    <label>Y</label>
                                    <input type="number" id="rot-y" min="-20" max="20" value="10" class="rot-input">
                                </div>
                                <div class="rotation-input-inline">
                                    <label>Z</label>
                                    <input type="number" id="rot-z" min="-20" max="20" value="0" class="rot-input">
                                </div>
                            </div>
                        </div>
                        <div class="rotation-controls-compact">
                            <label>Reset View Point</label>
                            <div class="rotation-inputs-inline">
                                <div class="rotation-input-inline">
                                    <label>X</label>
                                    <input type="number" id="reset-x" min="-10" max="10" step="0.1" value="-3" class="rot-input">
                                </div>
                                <div class="rotation-input-inline">
                                    <label>Y</label>
                                    <input type="number" id="reset-y" min="-10" max="10" step="0.1" value="7" class="rot-input">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="controls">
            <div id="controls-columns">
                <div id="controls-left-column">
                    <div class="section scenes-section">
                        <div class="collapsible-header active" id="scenes-header">
                            <span>Scenes</span>
                        </div>
                        <div class="collapsible-content active" id="scenes-content">
                            <div class="subsection-title">Scene Type</div>
                            <div id="scene-type-container" class="scene-type-buttons">
                                <!-- Scene type buttons will be generated by JavaScript -->
                            </div>

                            <div class="subsection-title">Scene-Specific Settings</div>
                            <div id="scene-params-container">
                                <!-- Scene-specific controls will be dynamically generated -->
                            </div>

                            <div class="subsection-title">Global Scene Parameters</div>
                            <div id="global-params-container">
                                <!-- Global parameters will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <div class="section illusion-scenes-section">
                        <div class="collapsible-header" id="illusion-scenes-header">
                            <span>Illusion Scenes</span>
                        </div>
                        <div class="collapsible-content" id="illusion-scenes-content">
                            <div class="subsection-title">Optical Illusions</div>
                            <div id="illusion-scene-type-container" class="scene-type-buttons">
                                <!-- Illusion scene buttons will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <div id="controls-right-column">
                    <div class="section led-colors-section">
                        <div class="collapsible-header active" id="led-colors-header">
                            <span>Colors</span>
                        </div>
                        <div class="collapsible-content active" id="led-colors-content">
                    <!-- Solid Colors -->
                    <div class="subsection-title">Solid</div>
                    <div class="color-presets-grid">
                        <button class="color-preset-btn active" data-type="single" data-color="#64C8FF" style="background: #64C8FF;"></button>
                        <button class="color-preset-btn" data-type="single" data-color="#FF6464" style="background: #FF6464;"></button>
                        <button class="color-preset-btn" data-type="single" data-color="#64FF64" style="background: #64FF64;"></button>
                        <button class="color-preset-btn" data-type="single" data-color="#FFD700" style="background: #FFD700;"></button>
                        <button class="color-preset-btn" data-type="single" data-color="#FF64FF" style="background: #FF64FF;"></button>
                        <button class="color-preset-btn" data-type="single" data-color="#00FFFF" style="background: #00FFFF;"></button>
                        <button class="color-preset-btn" data-type="single" data-color="#FFFFFF" style="background: #FFFFFF;"></button>
                        <button class="color-preset-btn" data-type="single" data-color="#FFA500" style="background: #FFA500;"></button>
                        <button class="color-preset-btn" data-type="single" data-color="#9B59B6" style="background: #9B59B6;"></button>
                        <button class="color-preset-btn" data-type="single" data-color="#E74C3C" style="background: #E74C3C;"></button>
                        <button class="color-preset-btn" data-type="single" data-color="#2ECC71" style="background: #2ECC71;"></button>
                        <button class="color-preset-btn" data-type="single" data-color="#3498DB" style="background: #3498DB;"></button>
                        <button class="color-preset-btn" data-type="single" data-color="#F39C12" style="background: #F39C12;"></button>
                        <button class="color-preset-btn" data-type="single" data-color="#1ABC9C" style="background: #1ABC9C;"></button>
                        <button class="color-preset-btn" data-type="single" data-color="#E67E22" style="background: #E67E22;"></button>
                        <button class="color-preset-btn" data-type="single" data-color="#95A5A6" style="background: #95A5A6;"></button>
                    </div>

                    <!-- Preset Gradients -->
                    <div class="subsection-title">Gradients</div>
                    <div class="color-presets-grid">
                        <button class="color-preset-btn" data-type="gradient" data-gradient="#FF0000,#FF00FF,#0000FF" style="background: linear-gradient(135deg, #FF0000 0%, #FF00FF 50%, #0000FF 100%);"></button>
                        <button class="color-preset-btn" data-type="gradient" data-gradient="#00FFFF,#00FF00,#FFFF00" style="background: linear-gradient(135deg, #00FFFF 0%, #00FF00 50%, #FFFF00 100%);"></button>
                        <button class="color-preset-btn" data-type="gradient" data-gradient="#FF00FF,#FF0080,#FF00FF" style="background: linear-gradient(135deg, #FF00FF 0%, #FF0080 50%, #FF00FF 100%);"></button>
                        <button class="color-preset-btn" data-type="gradient" data-gradient="#FFD700,#FFA500,#FF4500" style="background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FF4500 100%);"></button>
                        <button class="color-preset-btn" data-type="gradient" data-gradient="#1E3A8A,#3B82F6,#BFDBFE" style="background: linear-gradient(135deg, #1E3A8A 0%, #3B82F6 50%, #BFDBFE 100%);"></button>
                        <button class="color-preset-btn" data-type="gradient" data-gradient="#7C3AED,#A78BFA,#DDD6FE" style="background: linear-gradient(135deg, #7C3AED 0%, #A78BFA 50%, #DDD6FE 100%);"></button>
                        <button class="color-preset-btn" data-type="gradient" data-gradient="#059669,#10B981,#86EFAC" style="background: linear-gradient(135deg, #059669 0%, #10B981 50%, #86EFAC 100%);"></button>
                        <button class="color-preset-btn" data-type="gradient" data-gradient="#DC2626,#F87171,#FECACA" style="background: linear-gradient(135deg, #DC2626 0%, #F87171 50%, #FECACA 100%);"></button>
                        <button class="color-preset-btn" data-type="gradient" data-gradient="#0891B2,#06B6D4,#A5F3FC" style="background: linear-gradient(135deg, #0891B2 0%, #06B6D4 50%, #A5F3FC 100%);"></button>
                        <button class="color-preset-btn" data-type="gradient" data-gradient="#EA580C,#FB923C,#FED7AA" style="background: linear-gradient(135deg, #EA580C 0%, #FB923C 50%, #FED7AA 100%);"></button>
                        <button class="color-preset-btn" data-type="gradient" data-gradient="#BE185D,#EC4899,#FBCFE8" style="background: linear-gradient(135deg, #BE185D 0%, #EC4899 50%, #FBCFE8 100%);"></button>
                        <button class="color-preset-btn" data-type="gradient" data-gradient="#CA8A04,#EAB308,#FEF08A" style="background: linear-gradient(135deg, #CA8A04 0%, #EAB308 50%, #FEF08A 100%);"></button>
                    </div>

                    <!-- Custom Colors - Hidden -->
                    <div class="subsection-title" style="display: none;">Custom</div>
                    <div class="custom-color-controls" style="display: none;">
                        <div class="custom-color-row">
                            <div class="custom-color-inputs">
                                <input type="color" id="custom-single-color" value="#64C8FF">
                                <button class="apply-btn" id="apply-single-color">Apply</button>
                            </div>
                        </div>
                        <div class="custom-color-row">
                            <div class="custom-color-inputs">
                                <input type="color" id="custom-gradient-start" value="#FF0000">
                                <input type="color" id="custom-gradient-end" value="#0000FF">
                                <button class="apply-btn" id="apply-gradient">Apply</button>
                            </div>
                        </div>
                    </div>

                    <!-- Color Effects -->
                    <div class="subsection-title">Effects</div>
                    <div class="color-effect-buttons">
                        <button class="color-effect-btn active" data-effect="none">
                            <span>Static</span>
                        </button>
                        <button class="color-effect-btn" data-effect="cycle">
                            <span>Cycle</span>
                        </button>
                        <button class="color-effect-btn" data-effect="pulse">
                            <span>Pulse</span>
                        </button>
                        <button class="color-effect-btn" data-effect="wave">
                            <span>Wave</span>
                        </button>
                        </div>

                    <!-- 3D Gradient Mapping - Hidden -->
                    <div class="subsection-title" style="display: none;">3D Gradient Mapping</div>
                    <div class="control-group" style="display: none;">
                        <label>
                            <input type="checkbox" id="gradient-3d-enable">
                            Enable 3D Mapping
                        </label>
                    </div>
                    <div id="gradient-3d-controls" style="display: none;">
                        <div class="control-group">
                            <label>Type</label>
                            <select id="gradient-3d-type" class="param-select">
                                <option value="linear-y">Linear Y (Height)</option>
                                <option value="linear-x">Linear X</option>
                                <option value="linear-z">Linear Z</option>
                                <option value="radial">Radial</option>
                                <option value="spherical">Spherical</option>
                                <option value="cylindrical">Cylindrical</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>Origin X <span class="value-display" id="gradient-3d-origin-x-value">0.5</span></label>
                            <input type="range" id="gradient-3d-origin-x" min="0" max="1" step="0.05" value="0.5">
                        </div>
                        <div class="control-group">
                            <label>Origin Y <span class="value-display" id="gradient-3d-origin-y-value">0.5</span></label>
                            <input type="range" id="gradient-3d-origin-y" min="0" max="1" step="0.05" value="0.5">
                        </div>
                        <div class="control-group">
                            <label>Origin Z <span class="value-display" id="gradient-3d-origin-z-value">0.5</span></label>
                            <input type="range" id="gradient-3d-origin-z" min="0" max="1" step="0.05" value="0.5">
                        </div>
                        <div class="control-group">
                            <label>Falloff</label>
                            <select id="gradient-3d-falloff" class="param-select">
                                <option value="linear">Linear</option>
                                <option value="quadratic">Quadratic</option>
                                <option value="cubic">Cubic</option>
                                <option value="smoothstep">Smoothstep</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>
                                <input type="checkbox" id="gradient-3d-invert">
                                Invert
                            </label>
                        </div>
                    </div>

                    <!-- Advanced Color Effects -->
                    <div class="subsection-title">Advanced Effects</div>

                    <!-- Wave Effects -->
                    <div class="effect-category-title">Waves</div>
                    <div class="color-effect-buttons">
                        <button class="advanced-effect-btn" data-effect="waveMulti">
                            <span>Multi</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="waveVertical">
                            <span>Vertical</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="waveCircular">
                            <span>Circular</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="waveStanding">
                            <span>Standing</span>
                        </button>
                    </div>

                    <!-- Cycle Effects -->
                    <div class="effect-category-title">Cycles</div>
                    <div class="color-effect-buttons">
                        <button class="advanced-effect-btn" data-effect="cycleHue">
                            <span>Hue</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="cyclePalette">
                            <span>Palette</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="cycleComplementary">
                            <span>Complement</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="cycleTriadic">
                            <span>Triadic</span>
                        </button>
                    </div>

                    <!-- Pulse Effects -->
                    <div class="effect-category-title">Pulses</div>
                    <div class="color-effect-buttons">
                        <button class="advanced-effect-btn" data-effect="pulseRadial">
                            <span>Radial</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="pulseAlternating">
                            <span>Alternating</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="pulseLayered">
                            <span>Layered</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="pulseBeat">
                            <span>Beat</span>
                        </button>
                    </div>

                    <!-- Static/Noise Effects -->
                    <div class="effect-category-title">Static</div>
                    <div class="color-effect-buttons">
                        <button class="advanced-effect-btn" data-effect="staticColor">
                            <span>Color</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="staticDynamic">
                            <span>Dynamic</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="staticWave">
                            <span>Wave</span>
                        </button>
                    </div>

                    <!-- Combination Effects -->
                    <div class="effect-category-title">Combos</div>
                    <div class="color-effect-buttons">
                        <button class="advanced-effect-btn" data-effect="pulseWave">
                            <span>Pulse Wave</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="cyclePulse">
                            <span>Cycle Pulse</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="waveChase">
                            <span>Wave Chase</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="staticCycle">
                            <span>Static Cycle</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="pulseTrail">
                            <span>Pulse Trail</span>
                        </button>
                    </div>

                    <!-- Scrolling Effects -->
                    <div class="effect-category-title">Scrolling</div>
                    <div class="color-effect-buttons">
                        <button class="advanced-effect-btn" data-effect="scrollingStrobe">
                            <span>Strobe</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="scrollingPulse">
                            <span>Pulse</span>
                        </button>
                    </div>

                    <!-- 3D Spatial Effects -->
                    <div class="effect-category-title">3D Spatial</div>
                    <div class="color-effect-buttons">
                        <button class="advanced-effect-btn" data-effect="diagonalWaves">
                            <span>Diagonal</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="helix">
                            <span>Helix</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="vortex">
                            <span>Vortex</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="tunnel">
                            <span>Tunnel</span>
                        </button>
                    </div>

                    <!-- Procedural Effects -->
                    <div class="effect-category-title">Procedural</div>
                    <div class="color-effect-buttons">
                        <button class="advanced-effect-btn" data-effect="perlinNoise">
                            <span>Perlin</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="voronoi">
                            <span>Voronoi</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="checkerboard3D">
                            <span>Checker</span>
                        </button>
                    </div>

                    <!-- Interference Effects -->
                    <div class="effect-category-title">Interference</div>
                    <div class="color-effect-buttons">
                        <button class="advanced-effect-btn" data-effect="sineInterferenceXZ">
                            <span>Sine XZ</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="sphericalShellsMoving">
                            <span>Bubbles</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="cornerExplosion">
                            <span>Corners</span>
                        </button>
                    </div>

                    <!-- Geometric Effects -->
                    <div class="effect-category-title">Geometric</div>
                    <div class="color-effect-buttons">
                        <button class="advanced-effect-btn" data-effect="depthLayers">
                            <span>Depth</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="cubeInCube">
                            <span>Cube³</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="manhattanDistance">
                            <span>Manhattan</span>
                        </button>
                    </div>

                    <!-- Symmetry Effects -->
                    <div class="effect-category-title">Symmetry</div>
                    <div class="color-effect-buttons">
                        <button class="advanced-effect-btn" data-effect="xzMirror">
                            <span>XZ Mirror</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="directionalSweep">
                            <span>Dir Sweep</span>
                        </button>
                    </div>

                    <!-- Original Advanced Effects -->
                    <div class="effect-category-title">Classic</div>
                    <div class="color-effect-buttons">
                        <button class="advanced-effect-btn" data-effect="sparkle">
                            <span>Sparkle</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="rainbowSweep">
                            <span>Rainbow</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="fire">
                            <span>Fire</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="plasma">
                            <span>Plasma</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="kaleidoscope">
                            <span>Kaleid</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="breath">
                            <span>Breath</span>
                        </button>
                        <button class="advanced-effect-btn" data-effect="colorChase">
                            <span>Chase</span>
                        </button>
                        <button class="advanced-effect-btn active" data-effect="none">
                            <span>Off</span>
                        </button>
                    </div>

                    <!-- Effect Controls -->
                    <div class="control-group">
                        <label>Effect Intensity <span class="value-display" id="advanced-effect-intensity-value">1.0</span></label>
                        <input type="range" id="advanced-effect-intensity" min="0" max="1" step="0.05" value="1.0">
                    </div>
                    <div class="control-group">
                        <label>Effect Speed <span class="value-display" id="advanced-effect-speed-value">1.0</span></label>
                        <input type="range" id="advanced-effect-speed" min="0.1" max="5" step="0.1" value="1.0">
                    </div>
                    <div class="control-group">
                        <label>Color Mode</label>
                        <div class="button-group">
                            <button class="toggle-btn active" data-mode="rainbow" id="color-mode-rainbow">Rainbow</button>
                            <button class="toggle-btn" data-mode="base" id="color-mode-base">Base Color</button>
                        </div>
                    </div>

                    <!-- Scrolling Effect Parameters -->
                    <div class="subsection-title">Scrolling Parameters</div>
                    <div class="control-group">
                        <label>Scroll Thickness <span class="value-display" id="scroll-thickness-value">5</span></label>
                        <input type="range" id="scroll-thickness" min="1" max="20" step="1" value="5">
                    </div>
                    <div class="control-group">
                        <label>Scroll Direction</label>
                        <select id="scroll-direction" class="param-select">
                            <option value="y">Y (Vertical)</option>
                            <option value="x">X (Horizontal)</option>
                            <option value="z">Z (Depth)</option>
                            <option value="diagonal-xz">Diagonal XZ</option>
                            <option value="diagonal-yz">Diagonal YZ</option>
                            <option value="diagonal-xy">Diagonal XY</option>
                            <option value="radial">Radial (Center Out)</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>
                            <input type="checkbox" id="scroll-invert">
                            Invert (Turn Pixels Off)
                        </label>
                    </div>
                    </div>
                </div>

                    <!-- Global Controls (moved from left column) -->
                    <div class="section controls-section">
                        <div class="collapsible-header active" id="controls-header">
                            <span>Global Controls</span>
                        </div>
                        <div class="collapsible-content active" id="controls-content">
                            <div class="control-group">
                                <label>
                                    Animation Speed
                                    <span class="value-display" id="animation-speed-value">1.0</span>
                                </label>
                                <input type="range" id="animation-speed" min="0.1" max="5" step="0.1" value="1.0">
                            </div>

                            <div class="control-group">
                                <label>
                                    Color Speed
                                    <span class="value-display" id="color-effect-speed-value">1.0</span>
                                </label>
                                <input type="range" id="color-effect-speed" min="0.1" max="5" step="0.1" value="1.0">
                            </div>

                            <div class="subsection-title">Global Effects</div>

                            <div class="control-group">
                                <label>
                                    Decay / Blur
                                    <span class="value-display" id="decay-value">0.0</span>
                                </label>
                                <input type="range" id="decay" min="0" max="1" step="0.05" value="0">
                            </div>

                            <div class="control-group">
                                <label>Strobe</label>
                                <div class="button-group">
                                    <button class="toggle-btn active" data-mode="off" id="strobe-off">Off</button>
                                    <button class="toggle-btn" data-mode="slow" id="strobe-slow">Slow</button>
                                    <button class="toggle-btn" data-mode="medium" id="strobe-medium">Med</button>
                                    <button class="toggle-btn" data-mode="fast" id="strobe-fast">Fast</button>
                                </div>
                            </div>

                            <div class="control-group">
                                <label>Pulse</label>
                                <div class="button-group">
                                    <button class="toggle-btn active" data-mode="off" id="pulse-off">Off</button>
                                    <button class="toggle-btn" data-mode="slow" id="pulse-slow">Slow</button>
                                    <button class="toggle-btn" data-mode="medium" id="pulse-medium">Med</button>
                                    <button class="toggle-btn" data-mode="fast" id="pulse-fast">Fast</button>
                                </div>
                            </div>

                            <div class="control-group">
                                <label>
                                    <input type="checkbox" id="invert-checkbox">
                                    Invert
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Parameter Automation Section - Hidden -->
                <div id="controls-bottom-section" style="display: none;">
                    <div class="section automation-section">
                        <div class="collapsible-header" id="automation-header">
                            <span>Parameter Automation</span>
                        </div>
                        <div class="collapsible-content" id="automation-content">
                            <div class="automation-help">
                                Right-click any slider to automate it. Active automations appear below.
                            </div>
                            <div id="active-automations-list">
                                <!-- Active automations will appear here -->
                            </div>
                            <div class="automation-controls">
                                <button id="automation-clear-all" class="apply-btn">Clear All</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- Automation Config Modal -->
    <div id="automation-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Parameter Automation</h3>
                <button id="automation-modal-close" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="automation-param-name"></div>
                <div class="control-group">
                    <label>Wave Type</label>
                    <select id="automation-wave-type" class="param-select">
                        <option value="sine">Sine</option>
                        <option value="triangle">Triangle</option>
                        <option value="square">Square</option>
                        <option value="sawtooth">Sawtooth</option>
                        <option value="random">Random</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>Frequency (Hz) <span class="value-display" id="automation-frequency-value">1.0</span></label>
                    <input type="range" id="automation-frequency" min="0.1" max="10" step="0.1" value="1.0">
                </div>
                <div class="control-group">
                    <label>Depth <span class="value-display" id="automation-amplitude-value">0.5</span></label>
                    <input type="range" id="automation-amplitude" min="0" max="1" step="0.05" value="0.5">
                </div>
                <div class="control-group">
                    <label>Phase <span class="value-display" id="automation-phase-value">0.0</span></label>
                    <input type="range" id="automation-phase" min="0" max="1" step="0.05" value="0">
                </div>
            </div>
            <div class="modal-footer">
                <button id="automation-apply" class="apply-btn">Apply</button>
                <button id="automation-remove" class="apply-btn">Remove</button>
                <button id="automation-cancel" class="apply-btn">Cancel</button>
            </div>
        </div>
    </div>

    <script type="module" src="src/js/main.js"></script>
</body>
</html>
